<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd">
	
    <import resource="jobs/csv/quartz-minutely.xml"/>
    <import resource="jobs/csv/quartz-hourly.xml"/>
    <import resource="jobs/csv/quartz-daily.xml"/>
    <import resource="jobs/huuto/quartz-publish.xml"/>
    <import resource="jobs/huuto/quartz-clean.xml"/>
    <import resource="jobs/warm/quartz-warm.xml"/>
    
    <bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
   		<property name="jobFactory">
   			<bean class="org.springframework.scheduling.quartz.SpringBeanJobFactory"/>
   		</property>
   		<property name="schedulerContextAsMap">
   			<map>
   				<entry key="minuteIntervalScheduler" value-ref="minuteIntervalScheduler" />
   				<entry key="hourIntervalScheduler" value-ref="hourIntervalScheduler" />
   				<entry key="dayIntervalScheduler" value-ref="dayIntervalScheduler" />
   				<entry key="publishScheduler" value-ref="publishScheduler" />
   				<entry key="cleanScheduler" value-ref="cleanScheduler" />
   				<entry key="warmScheduler" value-ref="warmScheduler" />
   			</map>
   		</property>
        <property name="quartzProperties">
			<props>
				<prop key="org.quartz.scheduler.instanceId">AUTO</prop>

				<prop key="org.quartz.threadPool.class">org.quartz.simpl.SimpleThreadPool</prop>
				<prop key="org.quartz.threadPool.threadCount">1</prop>
				<prop key="org.quartz.threadPool.threadPriority">5</prop>

				<prop key="org.quartz.scheduler.skipUpdateCheck">true</prop>
			</props>
		</property>

        <property name="waitForJobsToCompleteOnShutdown" value="true"/>
        <property name="autoStartup" value="true"/>
        <property name="startupDelay" value="30" />
        <property name="triggers">
            <list>
            	<!-- <ref bean="minuteIntervalTrigger"/> -->
      			<ref bean="hourIntervalTrigger"/>
      			<ref bean="dayIntervalTrigger"/>
      			<!-- <ref bean="publishTrigger"/> -->
      			<!-- <ref bean="cleanTrigger"/> -->
      			<ref bean="warmTrigger"/>
            </list>
        </property>
    </bean>

</beans>
