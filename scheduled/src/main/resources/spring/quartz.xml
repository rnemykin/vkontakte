<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd">
	
	<bean id="csvParamMapper" class="com.abudko.reseller.huuto.query.mapper.csv.CsvParamMapper">
 		<constructor-arg value="classpath:/csv/huuto/query.csv" />
 	</bean>
 	
 	<bean id="csvUsedParamMapper" class="com.abudko.reseller.huuto.query.mapper.csv.CsvParamMapper">
 		<constructor-arg value="classpath:/csv/huuto/used-query.csv" />
 	</bean>
	
    <import resource="jobs/csv/quartz-minutely.xml"/>
    <import resource="jobs/csv/quartz-hourly.xml"/>
    <import resource="jobs/csv/quartz-daily.xml"/>
    <import resource="jobs/csv/quartz-randomly.xml"/>
    <import resource="jobs/csv/quartz-randomly-limit.xml"/>
    <import resource="jobs/csv/quartz-pikalevo.xml"/>
    <import resource="jobs/csv/quartz-clean-all.xml"/>
    <import resource="jobs/publish/quartz-publish-huuto.xml"/>
    <import resource="jobs/publish/quartz-publish-huuto-internal.xml"/>
    <import resource="jobs/publish/quartz-publish-lekmer.xml"/>
    <import resource="jobs/publish/quartz-clean.xml"/>
    <import resource="jobs/warm/quartz-warm.xml"/>
    
    <bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
   		<property name="jobFactory">
   			<bean class="org.springframework.scheduling.quartz.SpringBeanJobFactory"/>
   		</property>
   		<property name="schedulerContextAsMap">
   			<map>
   				<entry key="minuteIntervalScheduler" value-ref="minuteIntervalScheduler" />
   				<entry key="hourIntervalScheduler" value-ref="hourIntervalScheduler" />
   				<entry key="dayIntervalScheduler" value-ref="dayIntervalScheduler" />
   				<entry key="randomlySelectedScheduler" value-ref="randomlySelectedScheduler" />
   				<entry key="randomlySelectedSchedulerLimit" value-ref="randomlySelectedSchedulerLimit" />
   				<entry key="publishHuutoScheduler" value-ref="publishHuutoScheduler" />
   				<entry key="publishHuutoInternalScheduler" value-ref="publishHuutoInternalScheduler" />
   				<entry key="publishLekmerScheduler" value-ref="publishLekmerScheduler" />
   				<entry key="cleanScheduler" value-ref="cleanScheduler" />
   				<entry key="cleanAllScheduler" value-ref="cleanAllScheduler" />
   				<entry key="warmScheduler" value-ref="warmScheduler" />
   				<entry key="pikalevoScheduler" value-ref="pikalevoScheduler" />
   			</map>
   		</property>
        <property name="quartzProperties">
			<props>
				<prop key="org.quartz.scheduler.instanceId">AUTO</prop>

				<prop key="org.quartz.threadPool.class">org.quartz.simpl.SimpleThreadPool</prop>
				<prop key="org.quartz.threadPool.threadCount">1</prop>
				<prop key="org.quartz.threadPool.threadPriority">5</prop>

				<prop key="org.quartz.scheduler.skipUpdateCheck">true</prop>
			</props>
		</property>

        <property name="waitForJobsToCompleteOnShutdown" value="true"/>
        <property name="autoStartup" value="true"/>
        <property name="startupDelay" value="30" />
        <property name="triggers">
            <list>
            	<!-- <ref bean="minuteIntervalTrigger"/> -->
      			<ref bean="hourIntervalTrigger"/>
      			<!-- <ref bean="dayIntervalTrigger"/> -->
      			<ref bean="randomlySelectedTrigger"/>
      			<ref bean="randomlySelectedTriggerLimit"/>
      			<ref bean="publishHuutoTrigger"/>
      			<ref bean="publishHuutoInternalTrigger"/>
      			<ref bean="publishLekmerTrigger"/>
      			<ref bean="cleanTrigger"/>
      			<ref bean="cleanAllTrigger"/>
      			<ref bean="warmTrigger"/>
      			<ref bean="pikalevoTrigger"/>
            </list>
        </property>
    </bean>

</beans>
